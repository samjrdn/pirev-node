const MANUFACTURER = require('./manufacturer');
const MEMORY = require('./memory');
const PROCESSOR = require('./processor');
const TYPE = require('./type');

const REV_MAP = {
  0x02: [ TYPE.B, MEMORY.MB_256, PROCESSOR.BCM_2835, 1.0, MANUFACTURER.EGOMAN ],
  0x03: [ TYPE.B, MEMORY.MB_256, PROCESSOR.BCM_2835, 1.0, MANUFACTURER.EGOMAN ],
  0x04: [ TYPE.B, MEMORY.MB_256, PROCESSOR.BCM_2835, 2.0, MANUFACTURER.SONY_UK ],
  0x05: [ TYPE.B, MEMORY.MB_256, PROCESSOR.BCM_2835, 2.0, MANUFACTURER.QISDA ],
  0x06: [ TYPE.B, MEMORY.MB_256, PROCESSOR.BCM_2835, 2.0, MANUFACTURER.EGOMAN ],
  0x07: [ TYPE.A, MEMORY.MB_256, PROCESSOR.BCM_2835, 2.0, MANUFACTURER.EGOMAN ],
  0x08: [ TYPE.A, MEMORY.MB_256, PROCESSOR.BCM_2835, 2.0, MANUFACTURER.SONY_UK ],
  0x09: [ TYPE.A, MEMORY.MB_256, PROCESSOR.BCM_2835, 2.0, MANUFACTURER.QISDA ],
  0x0d: [ TYPE.B, MEMORY.MB_512, PROCESSOR.BCM_2835, 2.0, MANUFACTURER.EGOMAN ],
  0x0e: [ TYPE.B, MEMORY.MB_512, PROCESSOR.BCM_2835, 2.0, MANUFACTURER.SONY_UK ],
  0x0f: [ TYPE.B, MEMORY.MB_512, PROCESSOR.BCM_2835, 2.0, MANUFACTURER.EGOMAN ],
  0x10: [ TYPE.B_PLUS, MEMORY.MB_512, PROCESSOR.BCM_2835, 1.0, MANUFACTURER.SONY_UK ],
  0x11: [ TYPE.CM_1, MEMORY.MB_512, PROCESSOR.BCM_2835, 1.0, MANUFACTURER.SONY_UK ],
  0x12: [ TYPE.A_PLUS, MEMORY.MB_256, PROCESSOR.BCM_2835, 1.1, MANUFACTURER.SONY_UK ],
  0x13: [ TYPE.B_PLUS, MEMORY.MB_512, PROCESSOR.BCM_2835, 1.2, MANUFACTURER.EMBEST ],
  0x14: [ TYPE.CM_1, MEMORY.MB_512, PROCESSOR.BCM_2835, 1.0, MANUFACTURER.EMBEST ],
  0x15: [ TYPE.A_PLUS, MEMORY.MB_256, PROCESSOR.BCM_2835, 1.1, MANUFACTURER.EMBEST ],
};

function revInfo([ type, memory, processor, revision, manufacturer ]) {
  return { type, memory, processor, revision, manufacturer };
}

module.exports = function (code) {
  if (typeof code === 'string') {
    code = parseInt(code, 16);
  }

  if (code in REV_MAP) {
    return revInfo(REV_MAP[code]);
  } else {
    return null;
  }
};
